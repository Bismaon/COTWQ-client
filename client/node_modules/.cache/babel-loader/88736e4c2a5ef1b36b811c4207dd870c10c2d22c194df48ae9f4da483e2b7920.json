{"ast":null,"code":"// Menus.tsx\nimport React,{useEffect,useState}from'react';import'../stylesheet/Menus.css';import'../stylesheet/style.css';import EntryBox from'./EntryBox';import CountryInfo from'./CountryInfo';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const Menus=()=>{const[menu,setMenu]=useState('main');const[showEntryPoint,setShowEntryPoint]=useState(false);const[userData,setUserData]=useState(null);// State to hold user data\nconst[userID,setUserID]=useState(2);const[error,setError]=useState('');// State to hold error message\nuseEffect(()=>{// Fetch user data when userId changes\nif(userID){fetchUserData();}},[userID]);function startGame(gamemode){setShowEntryPoint(true);const title=document.getElementById('title');if(title)title.style.display='none';// TODO implement gamemode selection\n}const fetchUserData=async()=>{try{const response=await fetch('/users/fetch-user',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({id:userID})// Need to make the user login and keep track of his ID\n});if(response.ok){const userData=await response.json();setUserData(userData);setMenu('profile');// Switch to profile menu after fetching user data\nconsole.log(\"succcess\");}else{const errorText=await response.text();setError(\"Failed to fetch user: \".concat(errorText));}}catch(error){console.error('Error fetching user:',error);// Handle error\n}};const renderMenu=()=>{switch(menu){case'main':return/*#__PURE__*/_jsx(MainMenu,{setMenu:setMenu});case'games':if(!showEntryPoint){return/*#__PURE__*/_jsx(GamesMenu,{startGame:startGame,setMenu:setMenu});}else{return;// No menu\n}case'profile':return/*#__PURE__*/_jsx(ProfileMenu,{setMenu:setMenu,userData:userData});// Pass userData to ProfileMenu\ndefault:return/*#__PURE__*/_jsx(MainMenu,{setMenu:setMenu});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(EntryBox,{showEntryPoint:showEntryPoint}),/*#__PURE__*/_jsx(\"div\",{id:\"menu-container\",children:renderMenu()}),/*#__PURE__*/_jsx(CountryInfo,{showEntryPoint:showEntryPoint})]});};const MainMenu=_ref=>{let{setMenu}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"main-buttons\",id:\"main-menu\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setMenu('games'),children:\"Games\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"High Scores\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Settings\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setMenu('profile'),children:\"Profile\"})]});};const GamesMenu=_ref2=>{let{startGame,setMenu}=_ref2;return/*#__PURE__*/_jsxs(\"div\",{className:\"main-buttons\",id:\"games-menu\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setMenu('main'),children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>startGame('classic'),children:\"Classic country of the world quiz\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Flag Attribution\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"No map but fills\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Sequential\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Continents\"})]});};const ProfileMenu=_ref3=>{let{setMenu,userData}=_ref3;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"main-buttons\",id:\"profile-menu\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",onClick:()=>setMenu('main'),children:\"Back\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",children:\"Edit\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-box\",children:userData?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Information\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"ID: \",userData.id]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",userData.username]})]}):/*#__PURE__*/_jsx(\"p\",{children:\"Loading user data...\"})})]});};export default Menus;","map":{"version":3,"names":["React","useEffect","useState","EntryBox","CountryInfo","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Menus","menu","setMenu","showEntryPoint","setShowEntryPoint","userData","setUserData","userID","setUserID","error","setError","fetchUserData","startGame","gamemode","title","document","getElementById","style","display","response","fetch","method","headers","body","JSON","stringify","id","ok","json","console","log","errorText","text","concat","renderMenu","MainMenu","GamesMenu","ProfileMenu","children","_ref","className","onClick","_ref2","_ref3","username"],"sources":["C:/Users/esteb/Documents/GitHub/COTWQ-server/client/src/pages/Menus.tsx"],"sourcesContent":["// Menus.tsx\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport '../stylesheet/Menus.css';\r\nimport '../stylesheet/style.css';\r\nimport EntryBox from './EntryBox';\r\nimport CountryInfo from './CountryInfo';\r\nimport { UserModel } from '../models/UserModel';\r\n\r\n\r\nconst Menus: React.FC = () => {\r\n  const [menu, setMenu] = useState<string>('main');\r\n  const [showEntryPoint, setShowEntryPoint] = useState<boolean>(false);\r\n  const [userData, setUserData] = useState<UserModel|null>(null); // State to hold user data\r\n  const [userID, setUserID] = useState<number>(2);\r\n  const [error, setError] = useState<string>(''); // State to hold error message\r\n\r\n  useEffect(() => {\r\n    // Fetch user data when userId changes\r\n    if (userID) {\r\n      fetchUserData();\r\n    }\r\n  }, [userID]);\r\n  function startGame(gamemode: string) {\r\n    setShowEntryPoint(true);\r\n\r\n    const title: HTMLElement | null = document.getElementById('title');\r\n    if (title) title.style.display = 'none';\r\n    // TODO implement gamemode selection\r\n  }\r\n\r\n  const fetchUserData = async () => {\r\n\r\n    try {\r\n      const response = await fetch('/users/fetch-user', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ id: userID }), // Need to make the user login and keep track of his ID\r\n      });\r\n\r\n      if (response.ok) {\r\n        const userData = await response.json();\r\n\t\tsetUserData(userData);\r\n\t\tsetMenu('profile'); // Switch to profile menu after fetching user data\r\n\t\tconsole.log(\"succcess\");\r\n      } else {\r\n        const errorText = await response.text();\r\n        setError(`Failed to fetch user: ${errorText}`);\r\n      }\r\n    } catch (error) {\r\n\t\tconsole.error('Error fetching user:', error);\r\n\t\t// Handle error\r\n\t  }\r\n  };\r\n  \r\n\r\n  const renderMenu = () => {\r\n    switch (menu) {\r\n      case 'main':\r\n        return <MainMenu setMenu={setMenu} />;\r\n      case 'games':\r\n        if (!showEntryPoint) {\r\n          return <GamesMenu startGame={startGame} setMenu={setMenu} />;\r\n        } else {\r\n          return; // No menu\r\n        }\r\n      case 'profile':\r\n        return <ProfileMenu setMenu={setMenu} userData={userData} />; // Pass userData to ProfileMenu\r\n\r\n      default:\r\n        return <MainMenu setMenu={setMenu} />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <EntryBox showEntryPoint={showEntryPoint} />\r\n      <div id=\"menu-container\">\r\n        {renderMenu()}\r\n      </div>\r\n      <CountryInfo showEntryPoint={showEntryPoint} />\r\n    </>\r\n  );\r\n};\r\n\r\nconst MainMenu: React.FC<{ setMenu: (menu: string) => void }> = ({ setMenu }) => (\r\n  <div className=\"main-buttons\" id=\"main-menu\">\r\n    <button className=\"button\" onClick={() => setMenu('games')}>Games</button>\r\n    <button className=\"button\">High Scores</button>\r\n    <button className=\"button\">Settings</button>\r\n    <button className=\"button\" onClick={() => setMenu('profile')}>Profile</button>\r\n  </div>\r\n);\r\n\r\nconst GamesMenu: React.FC<{ startGame: (gamemode:string) =>void, setMenu: (menu: string) => void }>= ({startGame, setMenu}) => (\r\n  <div className=\"main-buttons\" id=\"games-menu\">\r\n    <button className=\"button\" onClick={()=>setMenu('main')}>Back</button>\r\n    <button className=\"button\" onClick={()=>startGame('classic')}>Classic country of the world quiz</button>\r\n    <button className=\"button\">Flag Attribution</button>\r\n    <button className=\"button\">No map but fills</button>\r\n    <button className=\"button\">Sequential</button>\r\n    <button className=\"button\">Continents</button>\r\n  </div>\r\n);\r\n\r\nconst ProfileMenu: React.FC<{ setMenu: (menu: string) => void, userData:UserModel|null}> = ({ setMenu, userData }) => (\r\n\t<>\r\n    <div className=\"main-buttons\" id=\"profile-menu\">\r\n      <button className=\"button\" onClick={() => setMenu('main')}>\r\n        Back\r\n      </button>\r\n      <button className=\"button\">Edit</button>\r\n    </div>\r\n    <div className=\"profile-box\">\r\n\t\t{userData ? (\r\n          <>\r\n            <h2>User Information</h2>\r\n            <p>ID: {userData.id}</p>\r\n            <p>Username: {userData.username}</p>\r\n            {/* Add more fields as needed */}\r\n          </>\r\n        ) : (\r\n          <p>Loading user data...</p>\r\n        )}\r\n\t</div>\r\n  </>\r\n);\r\nexport default Menus;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}